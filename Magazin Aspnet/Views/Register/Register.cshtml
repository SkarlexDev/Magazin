@page "/register"
@model User
<head>
   <link rel="stylesheet" href="~/css/accountRL.css" />
</head>
<div class="panel-container">
   <div class="main-block-register">
      <h1>Register</h1>
      <form id="loginForm" method="post" asp-action="RegisterUser">
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="text" class="form-control" id="fullName" name="FullName" placeholder="Full name"/>
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="text" class="form-control" id="phone" name="Phone" placeholder="Phone"/>
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="text" class="form-control" id="address" name="Address" placeholder="Address">
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-4">
               <input type="text" class="form-control" id="city" name="City" placeholder="City">
            </div>
            <div class="col-sm-4">
               <input type="text" class="form-control" id="state" name="State" placeholder="State">
            </div>
            <div class="col-sm-4">
               <input type="text" class="form-control" id="zip" name="Zip" placeholder="ZIP">
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="email" class="form-control" id="email" name="Email" required  placeholder="Email">
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="password" class="form-control" id="password" name="Password" required placeholder="Password">
            </div>
         </div>
         <div class="form-group row">
            <div class="col-sm-12">
               <input type="password" required class="form-control" id="confirm_password" placeholder="Confirm Password"/>
            </div>
         </div>
         <hr />
         <span id="message"></span>
         <button type="submit" id="submitButton">Register</button>
         <div style=" display: flex; justify-content: center; align-items: center;">
            <a href="/login" style="text-decoration: revert; padding: 10px">Login</a>
         </div>
      </form>
   </div>
</div>
<script>
   $("#password, #confirm_password").on("keyup", function () {
     if ($("#password").val() == $("#confirm_password").val()) {
       $("#message").html("");
     } else $("#message").html("Password Not Matching").css("color", "red");
   });
   const form = document.querySelector("#loginForm");
   form.addEventListener("submit", (e) => {
     var password = document.getElementById("password").value;
     var password_confirm =
       document.getElementById("confirm_password").value;
     if (password != password_confirm) {
       e.preventDefault();
       return false;
     }
     var email = $("#email").val();
     var url = "/check_email/" + email;
     $.ajax({
       url: url,
       type: "POST",
       async: false,
       success: function (res) {},
       error: function (res) {
         e.preventDefault();
       },
     });
   });
</script>